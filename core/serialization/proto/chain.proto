syntax = "proto3";

import "blockchain.proto";
import "common.proto";

package chain;

message AddBlockResp {
  common.Result result = 1;
  uint64 height = 2;
  bytes block_hash = 3;
}

message BlockHeight {
  uint64 height = 1;
}

message TransactionHash {
  bytes hash = 1;
}

message Data {
  bytes data = 1;
}

message CallResp {
  common.Result result = 1;
  bytes data = 2;
}

message SignedTransactionResp {
  common.Result result = 1;
  blockchain.SignedTransaction signed_tx = 2;
}

message BlockResp {
  common.Result result = 1;
  blockchain.Block block = 2;
}

message ReceiptResp {
  common.Result result = 1;
  blockchain.Receipt receipt = 2;
}

service ChainService {
  rpc AddBlock(blockchain.Block) returns (AddBlockResp);
  rpc GetBlock(BlockHeight) returns (BlockResp);
  rpc GetReceipt(TransactionHash) returns (ReceiptResp);
  rpc GetTransaction(TransactionHash) returns (SignedTransactionResp);
  rpc Call(Data) returns (CallResp);
}
